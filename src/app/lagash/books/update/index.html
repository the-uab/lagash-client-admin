<form layout="column" name="form" ng-submit="vm.update(vm.item)" layout-fill>
  <md-toolbar>
    <div class="md-toolbar-tools">
      <h1>
        Actualizar libro
      </h1>
      <span flex></span>
      <md-button type="submit" class="md-raised">Actualizar</md-button>
      <md-menu md-position-mode="target-right target">
        <md-button aria-label="Open demo menu"
                   class="md-icon-button"
                   ng-click="vm.openMenu($mdOpenMenu, $event)">
          <ng-md-icon icon="more_vert"></ng-md-icon>
        </md-button>
        <md-menu-content width="3">
          <md-menu-item ng-click="vm.delete(vm.item)">
            <md-button>
              <ng-md-icon icon="delete"></ng-md-icon>
              Eliminar
            </md-button>
          </md-menu-item>
        </md-menu-content>
      </md-menu>
    </div>
  </md-toolbar>
  <md-content flex>
    <md-tabs md-dynamic-height md-border-bottom>
      <md-tab label="ejemplares">
        <md-toolbar>
          <div class="md-toolbar-tools">
            <h1>
              Ejemplar ({{vm.ejemplares.length}})
            </h1>
            <span flex></span>
            <md-button aria-label="Open demo menu"
                       class="md-icon-button"
                         ng-click="vm.create_ejemplar()">
              <ng-md-icon icon="add"></ng-md-icon>
            </md-button>
          </div>
        </md-toolbar>
        <md-content ng-if="vm.create_ejemplar_state">
          <md-input-container class="md-block" flex-gt-xs flex>
            <label>UUID</label>
            <input ng-model="vm.ejemplar_item._id" md-maxlength="10" disabled>
            <div ng-messages="form._id.$error">
              <div ng-message="required">This is required.</div>
            </div>
          </md-input-container>
          <md-input-container class="md-block" flex-gt-xs>
            <label>Signatura topográfica</label>
            <input required ng-model="vm.ejemplar_item.code" md-maxlength="50">
            <div ng-messages="form.code.$error">
              <div ng-message="required">This is required.</div>
            </div>
          </md-input-container>
          <md-input-container class="md-block" flex-gt-xs>
            <label>Inventario</label>
            <input required ng-model="vm.ejemplar_item.inventory" md-maxlength="100">
            <div ng-messages="form.inventory.$error">
              <div ng-message="required">This is required.</div>
            </div>
          </md-input-container>
          <md-input-container class="md-block" flex-gt-xs>
            <label>Index</label>
            <input ng-model="vm.ejemplar_item.index" md-maxlength="10" class="md-secondary">
            <div ng-messages="form.index.$error">
              <div ng-message="required">This is required.</div>
            </div>
          </md-input-container>
          <md-button class="md-raised md-primary md-secondary"
                     ng-click="vm.save_ejemplar(vm.ejemplar_item)">
            Crear nuevo ejemplar
          </md-button>
        </md-content>
        <md-content>
          <md-list>
            <md-list-item ng-repeat="ejemplar in vm.ejemplares"
                          ng-click="vm.select_ejemplar(ejemplar)">
              <p><b>{{ejemplar.index}}</b> - {{ejemplar._id}}</p>
              <!-- <md-button class="md-secondary">
                {{ejemplar.status.es}}
              </md-button> -->
              <md-switch class="md-secondary"
                         ng-model="ejemplar.enabled"
                         ng-change="vm.change_ejemplar_state(ejemplar)"></md-switch>
            </md-list-item>
          </md-list>
        </md-content>
      </md-tab>
      <md-tab label="general">
        <md-content layout-padding>
          <md-input-container class="md-block" flex-gt-xs>
            <label>Titulo</label>
            <input required ng-model="vm.item.title" md-maxlength="250">
            <div ng-messages="form.title.$error">
              <div ng-message="required">This is required.</div>
            </div>
          </md-input-container>
          <md-input-container class="md-block" flex-gt-xs>
            <label>UUID</label>
            <input required ng-model="vm.item._id" disabled md-maxlength="36">
            <div ng-messages="form._id.$error">
              <div ng-message="required">This is required.</div>
            </div>
          </md-input-container>
          <md-input-container class="md-block" flex-gt-xs>
            <label>ISBN</label>
            <input required ng-model="vm.item.isbn" md-maxlength="20">
            <div ng-messages="form.isbn.$error">
              <div ng-message="required">This is required.</div>
            </div>
          </md-input-container>
          <md-input-container class="md-block" flex-gt-xs>
            <label>Descripcion</label>
            <textarea required ng-model="vm.item.description" md-maxlength="250" rows="5">
            </textarea>
          </md-input-container>
        </md-content>
      </md-tab>
      <md-tab label="detalle">
        <md-content layout-padding>
          <md-input-container class="md-block" flex-gt-xs>
            <label>Volumen</label>
            <input ng-model="vm.item.volumen" md-maxlength="10">
            <div ng-messages="form.volumen.$error">
              <div ng-message="required">This is required.</div>
            </div>
          </md-input-container>
          <md-input-container class="md-block" flex-gt-xs>
            <label>Tomo</label>
            <input ng-model="vm.item.tome" md-maxlength="10">
            <div ng-messages="form.tome.$error">
              <div ng-message="required">This is required.</div>
            </div>
          </md-input-container>
          <md-input-container class="md-block" flex-gt-xs>
            <label>Editorial</label>
            <input ng-model="vm.item.editorial" md-maxlength="100">
            <div ng-messages="form.editorial.$error">
              <div ng-message="required">This is required.</div>
            </div>
          </md-input-container>
          <md-input-container class="md-block" flex-gt-xs>
            <label>Pais</label>
            <input ng-model="vm.item.country" md-maxlength="50">
            <div ng-messages="form.country.$error">
              <div ng-message="required">This is required.</div>
            </div>
          </md-input-container>
          <md-input-container class="md-block" flex-gt-xs>
            <label>Ciudad</label>
            <input ng-model="vm.item.city" md-maxlength="50">
            <div ng-messages="form.city.$error">
              <div ng-message="required">This is required.</div>
            </div>
          </md-input-container>
          <md-input-container class="md-block" flex-gt-xs>
            <label>Trae (DC, etc)</label>
            <input ng-model="vm.item.brings" md-maxlength="100">
            <div ng-messages="form.brings.$error">
              <div ng-message="required">This is required.</div>
            </div>
          </md-input-container>
          <md-input-container class="md-block" flex-gt-xs>
            <label>Type</label>
            <input ng-model="vm.item.type" md-maxlength="50">
            <div ng-messages="form.type.$error">
              <div ng-message="required">This is required.</div>
            </div>
          </md-input-container>
          <md-input-container class="md-block" flex-gt-xs>
            <label>Ilustracion</label>
            <input ng-model="vm.item.illustration" md-maxlength="100">
            <div ng-messages="form.illustration.$error">
              <div ng-message="required">This is required.</div>
            </div>
          </md-input-container>
          <md-input-container class="md-block" flex-gt-xs>
            <label>Tamaño</label>
            <input ng-model="vm.item.size" md-maxlength="20">
            <div ng-messages="form.size.$error">
              <div ng-message="required">This is required.</div>
            </div>
          </md-input-container>
          <md-input-container class="md-block" flex-gt-xs>
            <label>Precio</label>
            <input ng-model="vm.item.price" md-maxlength="20">
            <div ng-messages="form.price.$error">
              <div ng-message="required">This is required.</div>
            </div>
          </md-input-container>
          <md-input-container class="md-block" flex-gt-xs>
            <label>Indice</label>
            <textarea ng-model="vm.item.index" md-maxlength="1000" rows="10">
            </textarea>
          </md-input-container>
        </md-content>
      </md-tab>
    </md-tabs>
  </md-content>
</form>
